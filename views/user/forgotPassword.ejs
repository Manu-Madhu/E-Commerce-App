<%- include('../partials/header.ejs')%>
    <div class="container-fluid p-0 justify-content-center align-items-center signUp min-vh-100"
        style="margin-top: 6%;">
        <%- include("../partials/navBar.ejs")%>
            <div class="container d-flex justify-content-center align-items-center">
                <div
                    class="container col-lg-4 d-flex flex-column justify-content-center align-items-center rounded-5 p-5 bg-white CardOTP">
                    <div class="d-flex align-items-center justify-content-center">
                        <img src="/assets/nav/tck.png" alt="" class="img-fluid imgOTP">
                    </div>
                    <div class="mt-2 d-flex flex-column align-items-center">
                        <span>Please give the details</span>
                        <div class="text-danger fw-bold" id="notification"></div>
                    </div>
                    <form id="formSubmition" action="#" method="post" onsubmit="return fullyChecking()"
                        style="width:100% " class="mt-3">
                        <div class=" credntials d-flex flex-column align-items-center justify-content-center gap-2"
                            style="width: 100%;">
                            <input class="loginInput p-1 " type="text" placeholder="Email " name="email" id="Email"
                                onchange="emailValidate()" required>
                            <span id="emailError" class="text text-danger mb-2"></span>
                            <input class="signInput" type="text" placeholder="Phone" name="number" id="number"
                                onchange="numberChecking()" required>
                            <span id="Number" class="text text-danger"></span>
                            <button class="btn btn-danger" style="font-size: 13px;">
                                Send Otp
                            </button>
                        </div>
                    </form>
                </div>
            </div>
    </div>
    <script src="/js/validation.js"></script>
    <script>
        const form = document.getElementById('formSubmition')
        const email = document.getElementById('Email');
        const phoneNumber = document.getElementById('number');
        const notification = document.getElementById('notification');

        form.addEventListener('submit', (event) => {
            event.preventDefault();

            const formData = {
                email: email.value,
                phoneNumber: phoneNumber.value
            };

            fetch('/forgotPassword', {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
                .then(response => response.json())
                .then(data => {
                    const msg2 = "Please Enter The Currect Number";
                    const msg = "Please Enter The Currect Email";
                    if(data == msg){
                        notification.innerHTML = msg;
                    }else if(data == msg2){
                        notification.innerHTML = msg2;
                    }else if(data == "otpSet"){ 
                        window.location.href ='/validation'
                    }
                })
                .catch(error => {
                    console.log(error);
                });
        });

    </script>
    <%- include('../partials/footer.ejs')%>